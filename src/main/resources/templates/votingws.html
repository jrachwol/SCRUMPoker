<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>SCRUM Voting</title>
    <link href="/main.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
<!--    <script src="/app.js"></script>-->
</head>

<body>
        <h2 th:text="'Zalogowany użytkownik: ' + ${member}"></h2>
        <h2 th:text="'SCRUM Room Name: ' + ${room.getName()}"></h2>
        <h2 th:text="'SCRUM Room Code: ' + ${room.getCode()}"></h2>

        <form action="#" th:action="@{/saveVote/{code}(code=${room.getCode()})}" th:object="${room}" method="post">
            <div th:each="card, stat : ${room.getCards()}">
            <input type="radio" th:value="${card.getFigure()}" th:text="${card.getFigure()}" name="card" th:required="${stat.first}" th:checked="${card != null && selectedCard != null && card.getId() == selectedCard.getId()}"/>
            </div>

            <button type="submit">Głosuj</button>

            <ul th:each="voter : ${voters}">
                <li>
                    <span th:text="${voter.name}"></span>
                    <a th:href="@{/deleteVoter/{id}/{code} (id=${voter.id}, code=${room.getCode()})}" th:text="${'Usuń'}"></a>
                </li>
            </ul>

            <ul th:each="vote : ${votes}">
                <td th:text="${vote.getVoter().getName()}"></td>
                <td th:text="${vote.getVote() != null ? vote.getVote().getFigure() : 'Oczekiwanie na głos'}"></td>
                <a th:href="@{/deleteVoter/{id}/{code} (id=${vote.getVoter().getId()}, code=${room.getCode()})}" th:text="${'Usuń'}"></a>
            </ul>

            <h2><a  th:href="@{/rooms}">Lista pokoi</a></h2>

        </form>


        <button id="connect" class="btn btn-default" type="submit">Connect</button>
        <button id="send-btn">Send</button>

<!--        <div class="row">-->
<!--            <div class="col-md-12">-->
<!--                <table id="conversation" class="table table-striped">-->
<!--                    <thead>-->
<!--                    <tr>-->
<!--                        <th>Votes</th>-->
<!--                    </tr>-->
<!--                    </thead>-->
<!--                    <tbody id="greetings">-->
<!--                    </tbody>-->
<!--                </table>-->
<!--            </div>-->
<!--        </div>-->

                <table id="conversation">
                    <thead>
                    <tr>
                        <th>Votes</th>
                    </tr>
                    </thead>
                    <tbody id="votes">
                    </tbody>
                </table>


        <script src="/app.js"></script>

</body>
</html>